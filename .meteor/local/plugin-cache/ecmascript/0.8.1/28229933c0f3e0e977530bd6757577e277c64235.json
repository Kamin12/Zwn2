{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"./set-scroll","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"setScroll"}]}],"exports":{"exported":["template"],"specifiers":[{"kind":"local","local":"template","exported":"default"}]}}},"options":{"filename":"imports/ui/components/handle-channel-switch.js","filenameRelative":"imports/ui/components/handle-channel-switch.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/components/handle-channel-switch.js.map","sourceFileName":"imports/ui/components/handle-channel-switch.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"handle-channel-switch"},"ignored":false,"code":"var setScroll = void 0;\nmodule.watch(require(\"./set-scroll\"), {\n  \"default\": function (v) {\n    setScroll = v;\n  }\n}, 0);\n\nvar _establishSubscription = function (template, isDirect, channel) {\n  template.subscribe('channel', isDirect, channel, function () {\n    setScroll('messages');\n    setTimeout(function () {\n      template.loading.set(false);\n    }, 300);\n  });\n};\n\nvar _handleSwitch = function (template) {\n  var channel = FlowRouter.getParam('channel');\n\n  if (channel) {\n    var isDirect = channel.includes('@');\n    template.isDirect.set(isDirect);\n    template.loading.set(true);\n\n    _establishSubscription(template, isDirect, channel);\n  }\n};\n\nvar _setupReactiveVariables = function (template) {\n  template.isDirect = new ReactiveVar(true);\n  template.loading = new ReactiveVar(true);\n};\n\nmodule.exportDefault(function (template) {\n  _setupReactiveVariables(template);\n\n  Tracker.autorun(function () {\n    _handleSwitch(template);\n  });\n});","map":{"version":3,"sources":["imports/ui/components/handle-channel-switch.js"],"names":["setScroll","module","watch","require","v","_establishSubscription","template","isDirect","channel","subscribe","setTimeout","loading","set","_handleSwitch","FlowRouter","getParam","includes","_setupReactiveVariables","ReactiveVar","exportDefault","Tracker","autorun"],"mappings":"AAAA,IAAIA,kBAAJ;AAAcC,OAAOC,KAAP,CAAaC,QAAQ,cAAR,CAAb,EAAqC;AAAA,uBAASC,CAAT,EAAW;AAACJ,gBAAUI,CAAV;AAAY;AAAxB,CAArC,EAA+D,CAA/D;;AAEd,IAAIC,yBAAyB,UAAEC,QAAF,EAAYC,QAAZ,EAAsBC,OAAtB,EAAmC;AAC9DF,WAASG,SAAT,CAAoB,SAApB,EAA+BF,QAA/B,EAAyCC,OAAzC,EAAkD,YAAM;AACtDR,cAAW,UAAX;AACAU,eAAY,YAAM;AAAEJ,eAASK,OAAT,CAAiBC,GAAjB,CAAsB,KAAtB;AAAgC,KAApD,EAAsD,GAAtD;AACD,GAHD;AAID,CALD;;AAOA,IAAIC,gBAAgB,UAAEP,QAAF,EAAgB;AAClC,MAAIE,UAAUM,WAAWC,QAAX,CAAqB,SAArB,CAAd;;AAEA,MAAKP,OAAL,EAAe;AACb,QAAID,WAAWC,QAAQQ,QAAR,CAAkB,GAAlB,CAAf;AACAV,aAASC,QAAT,CAAkBK,GAAlB,CAAuBL,QAAvB;AACAD,aAASK,OAAT,CAAiBC,GAAjB,CAAsB,IAAtB;;AACAP,2BAAwBC,QAAxB,EAAkCC,QAAlC,EAA4CC,OAA5C;AACD;AACF,CATD;;AAWA,IAAIS,0BAA0B,UAAEX,QAAF,EAAgB;AAC5CA,WAASC,QAAT,GAAoB,IAAIW,WAAJ,CAAiB,IAAjB,CAApB;AACAZ,WAASK,OAAT,GAAoB,IAAIO,WAAJ,CAAiB,IAAjB,CAApB;AACD,CAHD;;AApBAjB,OAAOkB,aAAP,CAyBe,UAAUb,QAAV,EAAqB;AAClCW,0BAAyBX,QAAzB;;AACAc,UAAQC,OAAR,CAAiB,YAAM;AAAER,kBAAeP,QAAf;AAA4B,GAArD;AACD,CA5BD","file":"imports/ui/components/handle-channel-switch.js.map","sourcesContent":["import setScroll from './set-scroll';\n\nlet _establishSubscription = ( template, isDirect, channel ) => {\n  template.subscribe( 'channel', isDirect, channel, () => {\n    setScroll( 'messages' );\n    setTimeout( () => { template.loading.set( false ); }, 300 );\n  });\n};\n\nlet _handleSwitch = ( template ) => {\n  let channel = FlowRouter.getParam( 'channel' );\n\n  if ( channel ) {\n    let isDirect = channel.includes( '@' );\n    template.isDirect.set( isDirect );\n    template.loading.set( true );\n    _establishSubscription( template, isDirect, channel );\n  }\n};\n\nlet _setupReactiveVariables = ( template ) => {\n  template.isDirect = new ReactiveVar( true );\n  template.loading  = new ReactiveVar( true );\n};\n\nexport default function( template ) {\n  _setupReactiveVariables( template );\n  Tracker.autorun( () => { _handleSwitch( template ); } );\n}\n"]},"hash":"28229933c0f3e0e977530bd6757577e277c64235"}
